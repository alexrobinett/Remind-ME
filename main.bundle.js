(()=>{"use strict";function e(e,t,n,d,c,s){if(!0===c){const d=document.querySelector(".reminder-container-completed"),c=document.createElement("div");c.classList.add("reminder"),c.classList.add("completed");const o=document.createElement("div");o.classList.add("circle"),o.classList.add("completed");const i=document.createElement("span");i.classList.add("task"),i.classList.add("completed"),i.textContent=`${e}`;const a=document.createElement("span");a.classList.add("description"),a.classList.add("completed"),a.textContent=`${t}`;const r=document.createElement("div");r.classList.add("right-side");const l=document.createElement("span");l.classList.add("due-date"),l.classList.add("completed"),l.textContent=`${n}`;const m=document.createElement("img");m.classList.add("edit"),m.classList.add("completed-icon"),m.src="/src/icons/text-box-edit.svg",m.alt="edit";const u=document.createElement("img");u.classList.add("delete"),u.classList.add("completed-icon"),u.src="/src/icons/trash-can-outline.svg",u.alt="trash",u.setAttribute("data-task",s),r.appendChild(l),r.appendChild(m),r.appendChild(u),c.appendChild(o),c.appendChild(i),c.appendChild(a),c.appendChild(r),d.appendChild(c)}else if(!1===c){const c=document.querySelector(".reminder-container"),o=document.createElement("div");o.classList.add("reminder");const i=document.createElement("div");i.classList.add("circle"),i.classList.add(`${d}`),i.setAttribute("data-task",s);const a=document.createElement("span");a.classList.add("task"),a.textContent=`${e}`;const r=document.createElement("span");r.classList.add("description"),r.textContent=`${t}`;const l=document.createElement("div");l.classList.add("right-side");const m=document.createElement("span");m.classList.add("due-date"),m.textContent=`${n}`;const u=document.createElement("img");u.classList.add("edit-btn"),u.src="/src/icons/text-box-edit.svg",u.alt="edit";const p=document.createElement("img");p.classList.add("delete-btn"),p.src="/src/icons/trash-can-outline.svg",p.alt="trash",p.setAttribute("data-task",s),l.appendChild(m),l.appendChild(u),l.appendChild(p),o.appendChild(i),o.appendChild(a),o.appendChild(r),o.appendChild(l),c.appendChild(o)}}function t(e,t){const n=document.querySelector(".project-list-ul"),d=document.createElement("li");d.classList.add("nav-item"),d.classList.add("project"),d.setAttribute("data-project",t);const c=document.createElement("img");c.src="/src/icons/format-list-bulleted.svg";const s=document.createElement("span");s.textContent=`${e}`,d.appendChild(c),d.appendChild(s),n.appendChild(d)}function n(e=0){document.querySelector(".project-title-holder").textContent=`${m[e].projectName}`}function d(){document.querySelector(".project-list-ul").innerHTML=""}function c(){const e=document.querySelector(".reminder-container");document.querySelector(".reminder-container-completed").innerHTML="",e.innerHTML=""}function s(){for(let e=0;e<m.length;e++)t(m[e].projectName,m[e].projectId)}function o(t=0){for(let n=0;n<m[t].task.length;n++)e(m[t].task[n].reminderTitle,m[t].task[n].reminderDescription,m[t].task[n].reminderDueDate,m[t].task[n].reminderPriority,m[t].task[n].isComplete,m[t].task[n].reminderId)}window.displayProjectTitle=n;const i=(e=!1,t)=>{let n=document.getElementById("reminder-title").value,d=document.getElementById("reminder-description").value,c=document.getElementById("reminder-priority").value;return{reminderTitle:n,reminderDescription:d,reminderDueDate:document.getElementById("reminder-due-date").value,reminderPriority:c,isComplete:e,toggleCompleted:function(){this.isComplete=!this.isComplete,console.log("isComplete set to",this.isComplete)},reminderId:Date.now()}},a=e=>({addTask:function(){this.task.push(i())},projectName:e,task:[],projectId:Date.now()});function r(e){localStorage.setItem("list-of-projects",JSON.stringify(e)),console.log(JSON.stringify(e))}function l(){let e=[];return e=JSON.parse(localStorage.getItem("list-of-projects")),console.log(e),e}let m=[];null===l()?(m.push(a("Inbox")),m[0].addTask(),m[0].task[0].isComplete,m[0].task[0].reminderDescription="test description",m[0].task[0].reminderTitle="Test Reminder",m[0].task[0].reminderDueDate="12-22-23",m[0].task[0].reminderPriority="high"):l(),window.projectsContainer=m,o(),n(),s();const u=document.querySelector(".add-reminder"),p=document.querySelector(".modal"),h=document.querySelector(".modal-update"),L=document.querySelectorAll(".close-button"),g=document.querySelector("#create-reminder"),E=document.querySelector("#add-project");let f=0;function C(){const e=document.querySelectorAll(".delete-btn"),t=document.querySelectorAll(".edit-btn"),i=document.querySelectorAll(".circle"),a=document.querySelectorAll(".nav-item");e.forEach((function(e,t){e.setAttribute("data-task",t),e.addEventListener("click",(function(){var t;"delete-btn"==(t=e).classList?t.parentNode.parentNode.remove():"project"==t.parentNode.classList?t.parentNode.remove():console.log("error");let n=e.getAttribute("data-task");m[f].task.splice(n,1),r(m)}))})),t.forEach((function(e){e.addEventListener("click",(function(){h.classList.toggle("hidden")}))})),i.forEach((function(e,t){e.setAttribute("data-task",t),e.addEventListener("click",(function(){let t=e.getAttribute("data-task");console.log(f);let n=m[f].task[t];n&&n.toggleCompleted&&n.toggleCompleted.call(n),c(),o(f),C(),r(m)}))})),a.forEach((function(e,t){e.setAttribute("data-project",t),e.addEventListener("click",(function(){let t=e.getAttribute("data-project");m[t].projectName,function(e,t){d(),s(),n(t)}(0,t),function(e){c(),o(e)}(t),f=t,C()}))}))}u.addEventListener("click",(function(e){p.classList.remove("hidden")})),L.forEach((function(e){e.addEventListener("click",(function(){!function(e){e.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("hidden")}(e)}))})),g.addEventListener("click",((e,t=m[f])=>{c(),t.addTask(),o(f),p.classList.add("hidden"),C(),r(m)})),E.addEventListener("click",(e=>{m.push(a(document.querySelector("#project-name").value)),d(),console.log(f),s(),C(),r(m),console.log("button clicked")})),C()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cUJBc0YsQ0FBV2IsRUFDYixHQUNGLElBR0FWLEVBQWtCUyxpQkFBaUIsU0FBUSxDQUFDWSxFQUFHckQsRUFBVVIsRUFBa0IwQyxNQUN2RXZDLElBQ0FLLEVBQVFlLFVBQ1JoQixFQUFvQm1DLEdBQ3BCTixFQUFVNUQsVUFBVUMsSUFBSSxVQUN4QmtFLElBQ0FsQixFQUFjekIsRUFBaUIsSUFNbkN5QyxFQUFpQlEsaUJBQWlCLFNBQVNZLElBQ3ZDN0QsRUFBa0J3QixLQUFLSCxFQUFjakQsU0FBU0MsY0FBYyxpQkFBaUJ5QyxRQUM3RWIsSUFDQWdCLFFBQVFDLElBQUl3QixHQUNadEMsSUFDQXVDLElBQ0FsQixFQUFjekIsR0FFbEJpQixRQUFRQyxJQUFJLGlCQUFnQixJQ3hHNUJ5QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVtaW5kLW1lLy4vc3JjL0pTL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vcmVtaW5kLW1lLy4vc3JjL0pTL2NvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vcmVtaW5kLW1lLy4vc3JjL0pTL2J1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vcmVtaW5kLW1lLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb2plY3RzQ29udGFpbmVyIH0gZnJvbSBcIi4vY29udHJvbFwiO1xuXG4vLyBET00gRWxlbWVudCBDcmVhdGlvbnNcblxuZnVuY3Rpb24gZGlzcGxheVJlbWluZGVycyhyZW1pbmRlclRpdGxlLCByZW1pbmRlckRlc2NyaXB0aW9uLCByZW1pbmRlckR1ZURhdGUsIHJlbWluZGVyUHJpb3JpdHksIGlzQ29tcGxldGUsIHJlbWluZGVySWQpe1xuXG4gICAgaWYoaXNDb21wbGV0ZSA9PT0gdHJ1ZSl7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtaW5kZXItY29udGFpbmVyLWNvbXBsZXRlZFwiKVxuICAgICAgICBjb25zdCByZW1pbmRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHJlbWluZGVyRGl2LmNsYXNzTGlzdC5hZGQoXCJyZW1pbmRlclwiKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZFwiKTtcblxuICAgICAgICBjb25zdCBjaXJjbGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjaXJjbGVEaXYuY2xhc3NMaXN0LmFkZChcImNpcmNsZVwiKTtcbiAgICAgICAgY2lyY2xlRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIik7XG5cbiAgICAgICAgY29uc3QgdGFza1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGFza1NwYW4uY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XG4gICAgICAgIHRhc2tTcGFuLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIik7XG4gICAgICAgIHRhc2tTcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJUaXRsZX1gO1xuXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkZXNjcmlwdGlvblNwYW4uY2xhc3NMaXN0LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBkZXNjcmlwdGlvblNwYW4uY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZFwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25TcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJEZXNjcmlwdGlvbn1gO1xuXG4gICAgICAgIGNvbnN0IHJpZ2h0U2lkZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHJpZ2h0U2lkZURpdi5jbGFzc0xpc3QuYWRkKFwicmlnaHQtc2lkZVwiKTtcblxuICAgICAgICBjb25zdCBkdWVEYXRlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkdWVEYXRlU3Bhbi5jbGFzc0xpc3QuYWRkKFwiZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVTcGFuLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIik7XG4gICAgICAgIGR1ZURhdGVTcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJEdWVEYXRlfWA7XG5cbiAgICAgICAgY29uc3QgZWRpdEJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGVkaXRCdG5JbWcuY2xhc3NMaXN0LmFkZChcImVkaXRcIik7XG4gICAgICAgIGVkaXRCdG5JbWcuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZC1pY29uXCIpO1xuICAgICAgICBlZGl0QnRuSW1nLnNyYyA9IFwiL3NyYy9pY29ucy90ZXh0LWJveC1lZGl0LnN2Z1wiO1xuICAgICAgICBlZGl0QnRuSW1nLmFsdCA9IFwiZWRpdFwiO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGRlbGV0ZUJ0bkltZy5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlXCIpO1xuICAgICAgICBkZWxldGVCdG5JbWcuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZC1pY29uXCIpO1xuICAgICAgICBkZWxldGVCdG5JbWcuc3JjID0gXCIvc3JjL2ljb25zL3RyYXNoLWNhbi1vdXRsaW5lLnN2Z1wiO1xuICAgICAgICBkZWxldGVCdG5JbWcuYWx0ID0gXCJ0cmFzaFwiO1xuICAgICAgICBkZWxldGVCdG5JbWcuc2V0QXR0cmlidXRlKCdkYXRhLXRhc2snLCByZW1pbmRlcklkKTtcblxuICAgICAgICByaWdodFNpZGVEaXYuYXBwZW5kQ2hpbGQoZHVlRGF0ZVNwYW4pO1xuICAgICAgICByaWdodFNpZGVEaXYuYXBwZW5kQ2hpbGQoZWRpdEJ0bkltZyk7XG4gICAgICAgIHJpZ2h0U2lkZURpdi5hcHBlbmRDaGlsZChkZWxldGVCdG5JbWcpO1xuXG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKGNpcmNsZURpdik7XG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKHRhc2tTcGFuKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25TcGFuKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQocmlnaHRTaWRlRGl2KTtcbiAgICAgICAgY29tcGxldGVkQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlbWluZGVyRGl2KVxuXG4gICAgfWVsc2UgaWYgKGlzQ29tcGxldGUgPT09IGZhbHNlKXtcblxuICAgICAgICBjb25zdCByZW1pbmRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtaW5kZXItY29udGFpbmVyXCIpXG5cbiAgICAgICAgY29uc3QgcmVtaW5kZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZW1pbmRlckRpdi5jbGFzc0xpc3QuYWRkKFwicmVtaW5kZXJcIik7XG5cbiAgICAgICAgY29uc3QgY2lyY2xlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2lyY2xlRGl2LmNsYXNzTGlzdC5hZGQoXCJjaXJjbGVcIik7XG4gICAgICAgIGNpcmNsZURpdi5jbGFzc0xpc3QuYWRkKGAke3JlbWluZGVyUHJpb3JpdHl9YCk7XG4gICAgICAgIGNpcmNsZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFzaycsIHJlbWluZGVySWQpXG5cbiAgICAgICAgY29uc3QgdGFza1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGFza1NwYW4uY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XG4gICAgICAgIHRhc2tTcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJUaXRsZX1gO1xuXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkZXNjcmlwdGlvblNwYW4uY2xhc3NMaXN0LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBkZXNjcmlwdGlvblNwYW4udGV4dENvbnRlbnQgPSBgJHtyZW1pbmRlckRlc2NyaXB0aW9ufWA7XG5cbiAgICAgICAgY29uc3QgcmlnaHRTaWRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgcmlnaHRTaWRlRGl2LmNsYXNzTGlzdC5hZGQoXCJyaWdodC1zaWRlXCIpO1xuXG4gICAgICAgIGNvbnN0IGR1ZURhdGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGR1ZURhdGVTcGFuLmNsYXNzTGlzdC5hZGQoXCJkdWUtZGF0ZVwiKTtcbiAgICAgICAgZHVlRGF0ZVNwYW4udGV4dENvbnRlbnQgPSBgJHtyZW1pbmRlckR1ZURhdGV9YDtcblxuICAgICAgICBjb25zdCBlZGl0QnRuSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgZWRpdEJ0bkltZy5jbGFzc0xpc3QuYWRkKFwiZWRpdC1idG5cIik7XG4gICAgICAgIGVkaXRCdG5JbWcuc3JjID0gXCIvc3JjL2ljb25zL3RleHQtYm94LWVkaXQuc3ZnXCI7XG4gICAgICAgIGVkaXRCdG5JbWcuYWx0ID0gXCJlZGl0XCI7XG5cbiAgICAgICAgY29uc3QgZGVsZXRlQnRuSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgZGVsZXRlQnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtYnRuXCIpO1xuICAgICAgICBkZWxldGVCdG5JbWcuc3JjID0gXCIvc3JjL2ljb25zL3RyYXNoLWNhbi1vdXRsaW5lLnN2Z1wiO1xuICAgICAgICBkZWxldGVCdG5JbWcuYWx0ID0gXCJ0cmFzaFwiO1xuICAgICAgICBkZWxldGVCdG5JbWcuc2V0QXR0cmlidXRlKCdkYXRhLXRhc2snLCByZW1pbmRlcklkKTtcblxuXG4gICAgXG4gICAgICAgIHJpZ2h0U2lkZURpdi5hcHBlbmRDaGlsZChkdWVEYXRlU3Bhbik7XG4gICAgICAgIHJpZ2h0U2lkZURpdi5hcHBlbmRDaGlsZChlZGl0QnRuSW1nKTtcbiAgICAgICAgcmlnaHRTaWRlRGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkltZyk7XG5cbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQoY2lyY2xlRGl2KTtcbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQodGFza1NwYW4pO1xuICAgICAgICByZW1pbmRlckRpdi5hcHBlbmRDaGlsZChkZXNjcmlwdGlvblNwYW4pO1xuICAgICAgICByZW1pbmRlckRpdi5hcHBlbmRDaGlsZChyaWdodFNpZGVEaXYpO1xuICAgICAgICByZW1pbmRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW1pbmRlckRpdilcbiAgICB9XG5cbn1cblxuXG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KHByb2plY3ROYW1lLCBwcm9qZWN0SWQpe1xuICAgIGNvbnN0IHByb2plY3RMaXN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3QtdWxcIilcblxuICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJuYXYtaXRlbVwiKVxuICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpXG4gICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnLCBwcm9qZWN0SWQpO1xuXG4gICAgY29uc3QgbGlzdEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIilcbiAgICBsaXN0SW1nLnNyYyA9IFwiL3NyYy9pY29ucy9mb3JtYXQtbGlzdC1idWxsZXRlZC5zdmdcIlxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcbiAgICBwcm9qZWN0VGl0bGVIb2xkZXIudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0TmFtZX1gXG5cbiAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChsaXN0SW1nKVxuICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZUhvbGRlcilcblxuICAgIHByb2plY3RMaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGxpc3RJdGVtKVxufVxuXG5cblxuXG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0VGl0bGUocHJvamVjdEluZGV4ID0gMCl7XG4gICAgY29uc3QgcHJvamVjdE5hbWVEaXNwbGF5ZXI9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10aXRsZS1ob2xkZXJcIilcbiAgICBwcm9qZWN0TmFtZURpc3BsYXllci50ZXh0Q29udGVudCA9IGAke3Byb2plY3RzQ29udGFpbmVyW3Byb2plY3RJbmRleF0ucHJvamVjdE5hbWV9YFxufVxuXG5cblxuLy8gY2xlYXIgRnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGNsZWFyUHJvamVjdExpc3QoKXtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3QtdWxcIilcblxuICAgIHByb2plY3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxufVxuXG5cblxuZnVuY3Rpb24gY2xlYXJSZW1pbmRlckxpc3QoKXtcbiAgICBjb25zdCByZW1pbmRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtaW5kZXItY29udGFpbmVyXCIpXG4gICAgY29uc3QgY29tcGxldGVkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZW1pbmRlci1jb250YWluZXItY29tcGxldGVkXCIpXG5cbiAgICBjb21wbGV0ZWRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxuICAgIHJlbWluZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcbn1cblxuXG5cblxuLy8gUmVuZGVyIEZ1bmN0aW9uc1xuXG5mdW5jdGlvbiByZW5kZXJQcm9qZWN0TGlzdCgpe1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qZWN0c0NvbnRhaW5lci5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGRpc3BsYXlQcm9qZWN0KHByb2plY3RzQ29udGFpbmVyW2ldLnByb2plY3ROYW1lLCBwcm9qZWN0c0NvbnRhaW5lcltpXS5wcm9qZWN0SWQpXG4gICAgfSAgIFxufVxuXG5cbmZ1bmN0aW9uIHJlbmRlclJlbWluZGVyc0xpc3QocHJvamVjdCA9IDApe1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHNDb250YWluZXJbcHJvamVjdF0udGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGRpc3BsYXlSZW1pbmRlcnMocHJvamVjdHNDb250YWluZXJbcHJvamVjdF0udGFza1tpXS5yZW1pbmRlclRpdGxlLCBwcm9qZWN0c0NvbnRhaW5lcltwcm9qZWN0XS50YXNrW2ldLnJlbWluZGVyRGVzY3JpcHRpb24sIHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RdLnRhc2tbaV0ucmVtaW5kZXJEdWVEYXRlLCBwcm9qZWN0c0NvbnRhaW5lcltwcm9qZWN0XS50YXNrW2ldLnJlbWluZGVyUHJpb3JpdHksIHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RdLnRhc2tbaV0uaXNDb21wbGV0ZSwgcHJvamVjdHNDb250YWluZXJbcHJvamVjdF0udGFza1tpXS5yZW1pbmRlcklkKVxuICAgIH1cbn1cblxuXG5mdW5jdGlvbiB1cGRhdGVEaXNwbGF5ZWRQcm9qZWN0KHByb2plY3ROYW1lLHByb2plY3RJbmRleCl7XG4gICAgY2xlYXJQcm9qZWN0TGlzdCgpXG4gICAgcmVuZGVyUHJvamVjdExpc3QocHJvamVjdEluZGV4ICwgcHJvamVjdEluZGV4KVxuICAgIGRpc3BsYXlQcm9qZWN0VGl0bGUocHJvamVjdEluZGV4KVxufVxuXG5mdW5jdGlvbiB1cGRhdGVEaXNwbGF5ZWRSZW1pbmRlcnMocHJvamVjdEluZGV4KXtcbiAgICBjbGVhclJlbWluZGVyTGlzdCgpXG4gICAgcmVuZGVyUmVtaW5kZXJzTGlzdChwcm9qZWN0SW5kZXgpXG59XG53aW5kb3cuZGlzcGxheVByb2plY3RUaXRsZSA9IGRpc3BsYXlQcm9qZWN0VGl0bGVcblxuXG5leHBvcnR7ZGlzcGxheVJlbWluZGVycywgZGlzcGxheVByb2plY3RUaXRsZSwgZGlzcGxheVByb2plY3QsIHJlbmRlclJlbWluZGVyc0xpc3QsIGNsZWFyUmVtaW5kZXJMaXN0LCBjbGVhclByb2plY3RMaXN0LCByZW5kZXJQcm9qZWN0TGlzdCwgdXBkYXRlRGlzcGxheWVkUHJvamVjdCx1cGRhdGVEaXNwbGF5ZWRSZW1pbmRlcnN9IiwiaW1wb3J0IHsgcmVuZGVyUmVtaW5kZXJzTGlzdCwgcmVuZGVyUHJvamVjdExpc3QsIGRpc3BsYXlQcm9qZWN0VGl0bGUgfSBmcm9tIFwiLi9kaXNwbGF5XCI7XG5pbXBvcnQgeyBhZGRMaXN0ZW5lcnMgfSBmcm9tIFwiLi9idXR0b25zXCI7XG5cblxuY29uc3QgY3JlYXRlUmVtaW5kZXIgPSAoaXNDb21wbGV0ZSA9IGZhbHNlLCBpZCkgPT4ge1xuICAgIGxldCByZW1pbmRlclRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW1pbmRlci10aXRsZVwiKS52YWx1ZVxuICAgIGxldCByZW1pbmRlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW1pbmRlci1kZXNjcmlwdGlvblwiKS52YWx1ZVxuICAgIGxldCByZW1pbmRlclByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW1pbmRlci1wcmlvcml0eVwiKS52YWx1ZVxuICAgIGxldCByZW1pbmRlckR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbWluZGVyLWR1ZS1kYXRlXCIpLnZhbHVlXG4gICAgbGV0IHJlbWluZGVySWQgPSBEYXRlLm5vdygpXG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDb21wbGV0ZWQoKSB7XG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9ICF0aGlzLmlzQ29tcGxldGU7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaXNDb21wbGV0ZSBzZXQgdG9cIiwgdGhpcy5pc0NvbXBsZXRlKTtcbiAgICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbWluZGVyVGl0bGUsXG4gICAgICAgIHJlbWluZGVyRGVzY3JpcHRpb24sXG4gICAgICAgIHJlbWluZGVyRHVlRGF0ZSxcbiAgICAgICAgcmVtaW5kZXJQcmlvcml0eSxcbiAgICAgICAgaXNDb21wbGV0ZSxcbiAgICAgICAgdG9nZ2xlQ29tcGxldGVkLFxuICAgICAgICByZW1pbmRlcklkXG4gICAgfTtcbn07XG5cblxuXG5jb25zdCBjcmVhdGVQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgICBsZXQgcHJvamVjdE5hbWUgPSBuYW1lXG4gICAgbGV0IHRhc2sgPSBbXVxuICAgIGNvbnN0IHByb2plY3RJZCA9IERhdGUubm93KClcblxuICAgIGZ1bmN0aW9uIGFkZFRhc2soKXtcbiAgICAgICAgdGhpcy50YXNrLnB1c2goY3JlYXRlUmVtaW5kZXIoKSlcbiAgICB9XG5cbiBcblxuICAgIHJldHVybiB7IFxuICAgICAgICBhZGRUYXNrLFxuICAgICAgICBwcm9qZWN0TmFtZSxcbiAgICAgICAgdGFzayxcbiAgICAgICAgcHJvamVjdElkXG4gICAgfTtcblxuICB9O1xuXG5cblxuXG4gICAgZnVuY3Rpb24gc3RvcmVQcm9qZWN0cyhwcm9qZWN0TGlzdCl7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibGlzdC1vZi1wcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpXG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSlcbiAgICB9XG5cblxuXG5cbiAgICBmdW5jdGlvbiBnZXRQcm9qZWN0c0Zyb21TdG9yZSgpe1xuICAgIGxldCByZXRyaWV2ZWRQcm9qZWN0cyA9IFtdXG4gICAgICAgcmV0cmlldmVkUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibGlzdC1vZi1wcm9qZWN0c1wiKSlcbiAgICAgICBjb25zb2xlLmxvZyhyZXRyaWV2ZWRQcm9qZWN0cylcbiAgICAgICByZXR1cm4gcmV0cmlldmVkUHJvamVjdHNcbiAgICB9XG5cblxuXG5sZXQgcHJvamVjdHNDb250YWluZXIgPSBbXVxuXG5pZihnZXRQcm9qZWN0c0Zyb21TdG9yZSgpID09PSBudWxsKXtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5wdXNoKGNyZWF0ZVByb2plY3QoXCJJbmJveFwiKSlcblxuICAgIHByb2plY3RzQ29udGFpbmVyWzBdLmFkZFRhc2soKVxuICAgIFxuICAgIHByb2plY3RzQ29udGFpbmVyWzBdLnRhc2tbMF0uaXNDb21wbGV0ZVxuICAgIHByb2plY3RzQ29udGFpbmVyWzBdLnRhc2tbMF0ucmVtaW5kZXJEZXNjcmlwdGlvbiA9IFwidGVzdCBkZXNjcmlwdGlvblwiXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0udGFza1swXS5yZW1pbmRlclRpdGxlID0gXCJUZXN0IFJlbWluZGVyXCJcbiAgICBwcm9qZWN0c0NvbnRhaW5lclswXS50YXNrWzBdLnJlbWluZGVyRHVlRGF0ZSA9IFwiMTItMjItMjNcIlxuICAgIHByb2plY3RzQ29udGFpbmVyWzBdLnRhc2tbMF0ucmVtaW5kZXJQcmlvcml0eSA9IFwiaGlnaFwiXG4gICAgXG59ZWxzZSBwcm9qZWN0c0NvbnRhaW5lciA9PT0gZ2V0UHJvamVjdHNGcm9tU3RvcmUoKVxuXG5cbndpbmRvdy5wcm9qZWN0c0NvbnRhaW5lciA9IHByb2plY3RzQ29udGFpbmVyXG5cbnJlbmRlclJlbWluZGVyc0xpc3QoKVxuZGlzcGxheVByb2plY3RUaXRsZSgpXG5yZW5kZXJQcm9qZWN0TGlzdCgpXG5cblxuXG5leHBvcnR7Y3JlYXRlUmVtaW5kZXIsY3JlYXRlUHJvamVjdCwgZ2V0UHJvamVjdHNGcm9tU3RvcmUsIHN0b3JlUHJvamVjdHMsIHByb2plY3RzQ29udGFpbmVyfVxuICBcblxuXG4iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBwcm9qZWN0c0NvbnRhaW5lciwgdG9nZ2xlQ29tcGxldGVkLCBjcmVhdGVSZW1pbmRlciwgc3RvcmVQcm9qZWN0c30gZnJvbSBcIi4vY29udHJvbFwiXG5pbXBvcnQgeyBjbGVhclJlbWluZGVyTGlzdCwgcmVuZGVyUmVtaW5kZXJzTGlzdCwgZGlzcGxheVByb2plY3QsIHJlbmRlclByb2plY3RMaXN0LCBjbGVhclByb2plY3RMaXN0LCB1cGRhdGVEaXNwbGF5ZWRQcm9qZWN0LCB1cGRhdGVEaXNwbGF5ZWRSZW1pbmRlcnMgfSBmcm9tIFwiLi9kaXNwbGF5XCJcblxuXG4vLyBET00gQ2FjaGVcblxuY29uc3QgYWRkUmVtaW5kZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1yZW1pbmRlclwiKVxuY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKVxuY29uc3QgdXBkYXRlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtdXBkYXRlXCIpXG5jb25zdCBjbG9zZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbG9zZS1idXR0b25cIilcbmNvbnN0IGNyZWF0ZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVhdGUtcmVtaW5kZXJcIilcbmNvbnN0IGNyZWF0ZVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wcm9qZWN0XCIpXG5cbmxldCBjdXJyZW50UHJvamVjdEluZGV4ID0gMFxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnMoKXtcblxuICAgIGNvbnN0IGRlbGV0ZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZWxldGUtYnRuXCIpXG4gICAgY29uc3QgZWRpdFJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWJ0blwiKVxuICAgIGNvbnN0IHRvZ2dsZUNvbXBsZXRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2lyY2xlXCIpXG4gICAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LWl0ZW1cIilcbiAgICAgIFxuICAgICAgIGRlbGV0ZVJlbWluZGVyQnRuLmZvckVhY2goIGZ1bmN0aW9uIChpLCBpbmRleCwgKSB7XG4gICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIsIGluZGV4KTtcbiAgICAgICAgaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVtb3ZlRGlzcGxheShpKVxuICAgICAgICAgIGxldCB0YXNrSW5kZXggPSBpLmdldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiKTtcbiAgICAgICAgICBwcm9qZWN0c0NvbnRhaW5lcltjdXJyZW50UHJvamVjdEluZGV4XS50YXNrLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xuICAgICAgICAgc3RvcmVQcm9qZWN0cyhwcm9qZWN0c0NvbnRhaW5lcilcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgICBlZGl0UmVtaW5kZXJCdG4uZm9yRWFjaCggZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICBpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICB0b2dnbGVDb21wbGV0ZWQuZm9yRWFjaChmdW5jdGlvbiAoaSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIsIGluZGV4KTtcbiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IHRhc2tJbmRleCA9IGkuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50UHJvamVjdEluZGV4KVxuICAgICAgICAgICAgICBsZXQgcmVtaW5kZXIgPSBwcm9qZWN0c0NvbnRhaW5lcltjdXJyZW50UHJvamVjdEluZGV4XS50YXNrW3Rhc2tJbmRleF07XG4gICAgICAgICAgICAgIGlmIChyZW1pbmRlciAmJiByZW1pbmRlci50b2dnbGVDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgIHJlbWluZGVyLnRvZ2dsZUNvbXBsZXRlZC5jYWxsKHJlbWluZGVyKX1cbiAgICAgICAgICAgICAgY2xlYXJSZW1pbmRlckxpc3QoKVxuICAgICAgICAgICAgICByZW5kZXJSZW1pbmRlcnNMaXN0KGN1cnJlbnRQcm9qZWN0SW5kZXgpXG4gICAgICAgICAgICAgIGFkZExpc3RlbmVycygpXG4gICAgICAgICAgICAgIHN0b3JlUHJvamVjdHMocHJvamVjdHNDb250YWluZXIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHByb2plY3RCdG4uZm9yRWFjaChmdW5jdGlvbiAoaSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIsIGluZGV4KTtcbiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IHByb2plY3RJbmRleCA9IGkuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIpO1xuICAgICAgICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RJbmRleF0ucHJvamVjdE5hbWU7XG4gICAgICAgICAgICAgIHVwZGF0ZURpc3BsYXllZFByb2plY3QocHJvamVjdCAsIHByb2plY3RJbmRleClcbiAgICAgICAgICAgICAgdXBkYXRlRGlzcGxheWVkUmVtaW5kZXJzKHByb2plY3RJbmRleClcbiAgICAgICAgICAgICAgY3VycmVudFByb2plY3RJbmRleCA9IHByb2plY3RJbmRleFxuICAgICAgICAgICAgICBhZGRMaXN0ZW5lcnMoKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbn1cblxuXG4vLyBSZW1pbmRlciBpbnB1dCBmb3Jtc1xuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKGVsZW1lbnQpe1xuICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH1cbiAgXG5mdW5jdGlvbiByZW1vdmVEaXNwbGF5KGVsZW1lbnQpe1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0ID09IFwiZGVsZXRlLWJ0blwiKXtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlKClcbiAgICAgIH1lbHNlIGlmIChlbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0ID09IFwicHJvamVjdFwiKXtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZSgpXG4gICAgICB9ZWxzZSBjb25zb2xlLmxvZyhcImVycm9yXCIpXG5cbn1cblxuXG5cblxuYWRkUmVtaW5kZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKGUpe1xuICAgIGlucHV0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG59KTtcblxuXG5jbG9zZVJlbWluZGVyQnRuLmZvckVhY2goIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIGNsb3NlTW9kYWwoZWxlbWVudClcbiAgfSlcbn0pO1xuXG5cbmNyZWF0ZVJlbWluZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlLCBwcm9qZWN0ID0gcHJvamVjdHNDb250YWluZXJbY3VycmVudFByb2plY3RJbmRleF0pID0+IHsgICAgXG4gICAgY2xlYXJSZW1pbmRlckxpc3QoKVxuICAgIHByb2plY3QuYWRkVGFzaygpXG4gICAgcmVuZGVyUmVtaW5kZXJzTGlzdChjdXJyZW50UHJvamVjdEluZGV4KVxuICAgIGlucHV0Rm9ybS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgYWRkTGlzdGVuZXJzKClcbiAgICBzdG9yZVByb2plY3RzKHByb2plY3RzQ29udGFpbmVyKVxufSk7XG5cblxuLy8gY3JlYXRlIHByb2plY3QgYnV0dG9uc1xuXG5jcmVhdGVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlKSA9PiB7ICAgIFxuICAgIHByb2plY3RzQ29udGFpbmVyLnB1c2goY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbmFtZVwiKS52YWx1ZSkpXG4gICAgY2xlYXJQcm9qZWN0TGlzdCgpXG4gICAgY29uc29sZS5sb2coY3VycmVudFByb2plY3RJbmRleClcbiAgICByZW5kZXJQcm9qZWN0TGlzdChjdXJyZW50UHJvamVjdEluZGV4KVxuICAgIGFkZExpc3RlbmVycygpXG4gICAgc3RvcmVQcm9qZWN0cyhwcm9qZWN0c0NvbnRhaW5lcilcblxuY29uc29sZS5sb2coXCJidXR0b24gY2xpY2tlZFwiKVxufSk7XG5cblxuXG5cblxuICBleHBvcnQge2FkZExpc3RlbmVyc30iLCJpbXBvcnQge2FkZExpc3RlbmVyc30gZnJvbSAnLi9KUy9idXR0b25zLmpzJ1xuaW1wb3J0IHsgY3JlYXRlUmVtaW5kZXIsIFByb2plY3QsIHByb2plY3RzQ29udGFpbmVyLCBnZXRQcm9qZWN0c0Zyb21TdG9yZSB9IGZyb20gJy4vSlMvY29udHJvbCdcbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0TGlzdCwgZGlzcGxheVByb2plY3RUaXRsZSwgZGlzcGxheVJlbWluZGVycywgcmVuZGVyUmVtaW5kZXJzTGlzdCB9IGZyb20gJy4vSlMvZGlzcGxheSdcblxuLy8gd2luZG93LmRpc3BsYXlSZW1pbmRlcnMgPSBkaXNwbGF5UmVtaW5kZXJzXG5cblxuXG4vLyB3aW5kb3cuaW5ib3ggPSBpbmJveFxuXG4vLyB3aW5kb3cuZGlzcGxheVByb2plY3RUaXRsZSA9IGRpc3BsYXlQcm9qZWN0VGl0bGVcblxuLy8gd2luZG93LmRpc3BsYXlQcm9qZWN0TGlzdCA9IGRpc3BsYXlQcm9qZWN0TGlzdFxuXG5cblxuYWRkTGlzdGVuZXJzKCkiXSwibmFtZXMiOlsiZGlzcGxheVJlbWluZGVycyIsInJlbWluZGVyVGl0bGUiLCJyZW1pbmRlckRlc2NyaXB0aW9uIiwicmVtaW5kZXJEdWVEYXRlIiwicmVtaW5kZXJQcmlvcml0eSIsImlzQ29tcGxldGUiLCJyZW1pbmRlcklkIiwiY29tcGxldGVkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVtaW5kZXJEaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiY2lyY2xlRGl2IiwidGFza1NwYW4iLCJ0ZXh0Q29udGVudCIsImRlc2NyaXB0aW9uU3BhbiIsInJpZ2h0U2lkZURpdiIsImR1ZURhdGVTcGFuIiwiZWRpdEJ0bkltZyIsInNyYyIsImFsdCIsImRlbGV0ZUJ0bkltZyIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwicmVtaW5kZXJDb250YWluZXIiLCJkaXNwbGF5UHJvamVjdCIsInByb2plY3ROYW1lIiwicHJvamVjdElkIiwicHJvamVjdExpc3RDb250YWluZXIiLCJsaXN0SXRlbSIsImxpc3RJbWciLCJwcm9qZWN0VGl0bGVIb2xkZXIiLCJkaXNwbGF5UHJvamVjdFRpdGxlIiwicHJvamVjdEluZGV4IiwicHJvamVjdHNDb250YWluZXIiLCJjbGVhclByb2plY3RMaXN0IiwiaW5uZXJIVE1MIiwiY2xlYXJSZW1pbmRlckxpc3QiLCJyZW5kZXJQcm9qZWN0TGlzdCIsImkiLCJsZW5ndGgiLCJyZW5kZXJSZW1pbmRlcnNMaXN0IiwicHJvamVjdCIsInRhc2siLCJ3aW5kb3ciLCJjcmVhdGVSZW1pbmRlciIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsInRvZ2dsZUNvbXBsZXRlZCIsInRoaXMiLCJjb25zb2xlIiwibG9nIiwiRGF0ZSIsIm5vdyIsImNyZWF0ZVByb2plY3QiLCJuYW1lIiwiYWRkVGFzayIsInB1c2giLCJzdG9yZVByb2plY3RzIiwicHJvamVjdExpc3QiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFByb2plY3RzRnJvbVN0b3JlIiwicmV0cmlldmVkUHJvamVjdHMiLCJwYXJzZSIsImdldEl0ZW0iLCJhZGRSZW1pbmRlckJ0biIsImlucHV0Rm9ybSIsInVwZGF0ZUZvcm0iLCJjbG9zZVJlbWluZGVyQnRuIiwicXVlcnlTZWxlY3RvckFsbCIsImNyZWF0ZVJlbWluZGVyQnRuIiwiY3JlYXRlUHJvamVjdEJ0biIsImN1cnJlbnRQcm9qZWN0SW5kZXgiLCJhZGRMaXN0ZW5lcnMiLCJkZWxldGVSZW1pbmRlckJ0biIsImVkaXRSZW1pbmRlckJ0biIsInByb2plY3RCdG4iLCJmb3JFYWNoIiwiaW5kZXgiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmUiLCJ0YXNrSW5kZXgiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpY2UiLCJ0b2dnbGUiLCJyZW1pbmRlciIsImNhbGwiLCJ1cGRhdGVEaXNwbGF5ZWRQcm9qZWN0IiwidXBkYXRlRGlzcGxheWVkUmVtaW5kZXJzIiwiZSIsInBhcmVudEVsZW1lbnQiLCJjbG9zZU1vZGFsIl0sInNvdXJjZVJvb3QiOiIifQ==