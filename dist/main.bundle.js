(()=>{"use strict";function e(e,t,n,d,c,s){if(!0===c){const d=document.querySelector(".reminder-container-completed"),c=document.createElement("div");c.classList.add("reminder"),c.classList.add("completed");const o=document.createElement("div");o.classList.add("circle"),o.classList.add("completed");const a=document.createElement("span");a.classList.add("task"),a.classList.add("completed"),a.textContent=`${e}`;const i=document.createElement("span");i.classList.add("description"),i.classList.add("completed"),i.textContent=`${t}`;const r=document.createElement("div");r.classList.add("right-side");const l=document.createElement("span");l.classList.add("due-date"),l.classList.add("completed"),l.textContent=`${n}`;const m=document.createElement("img");m.classList.add("edit"),m.classList.add("completed-icon"),m.src="/src/icons/text-box-edit.svg",m.alt="edit";const u=document.createElement("img");u.classList.add("delete"),u.classList.add("completed-icon"),u.src="/src/icons/trash-can-outline.svg",u.alt="trash",u.setAttribute("data-task",s),r.appendChild(l),r.appendChild(m),r.appendChild(u),c.appendChild(o),c.appendChild(a),c.appendChild(i),c.appendChild(r),d.appendChild(c)}else if(!1===c){const c=document.querySelector(".reminder-container"),o=document.createElement("div");o.classList.add("reminder");const a=document.createElement("div");a.classList.add("circle"),a.classList.add(`${d}`),a.setAttribute("data-task",s);const i=document.createElement("span");i.classList.add("task"),i.textContent=`${e}`;const r=document.createElement("span");r.classList.add("description"),r.textContent=`${t}`;const l=document.createElement("div");l.classList.add("right-side");const m=document.createElement("span");m.classList.add("due-date"),m.textContent=`${n}`;const u=document.createElement("img");u.classList.add("edit-btn"),u.src="/src/icons/text-box-edit.svg",u.alt="edit";const p=document.createElement("img");p.classList.add("delete-btn"),p.src="/src/icons/trash-can-outline.svg",p.alt="trash",p.setAttribute("data-task",s),l.appendChild(m),l.appendChild(u),l.appendChild(p),o.appendChild(a),o.appendChild(i),o.appendChild(r),o.appendChild(l),c.appendChild(o)}}function t(e,t){const n=document.querySelector(".project-list-ul"),d=document.createElement("li");d.classList.add("nav-item"),d.classList.add("project"),d.setAttribute("data-project",t);const c=document.createElement("img");c.src="/src/icons/format-list-bulleted.svg";const s=document.createElement("span");s.textContent=`${e}`,d.appendChild(c),d.appendChild(s),n.appendChild(d)}function n(e=0){document.querySelector(".project-title-holder").textContent=`${m[e].projectName}`}function d(){document.querySelector(".project-list-ul").innerHTML=""}function c(){const e=document.querySelector(".reminder-container");document.querySelector(".reminder-container-completed").innerHTML="",e.innerHTML=""}function s(){for(let e=0;e<m.length;e++)t(m[e].projectName,m[e].projectId)}function o(t=0){for(let n=0;n<m[t].task.length;n++)e(m[t].task[n].reminderTitle,m[t].task[n].reminderDescription,m[t].task[n].reminderDueDate,m[t].task[n].reminderPriority,m[t].task[n].isComplete,m[t].task[n].reminderId)}const a=(e=!1)=>{let t=document.getElementById("reminder-title").value,n=document.getElementById("reminder-description").value,d=document.getElementById("reminder-priority").value;return{reminderTitle:t,reminderDescription:n,reminderDueDate:document.getElementById("reminder-due-date").value,reminderPriority:d,isComplete:e,toggleCompleted:function(){this.isComplete=!this.isComplete,console.log("isComplete set to",this.isComplete)},reminderId:Date.now()}},i=e=>({addTask:function(){this.task.push(a())},projectName:e,task:[],projectId:Date.now()});function r(e){localStorage.setItem("list-of-projects",JSON.stringify(e)),console.log(JSON.stringify(e))}function l(){let e=[];return e=JSON.parse(localStorage.getItem("list-of-projects")),e}let m=[];null===l()?(m.push(i("Inbox")),m[0].addTask(),m[0].task[0].isComplete,m[0].task[0].reminderDescription="Wash Work Clothes",m[0].task[0].reminderTitle="Separate Lights and Darks",m[0].task[0].reminderDueDate="3-21-23",m[0].task[0].reminderPriority="medium",o(),n(),s()):"object"==typeof l()&&(m=l(),console.log(m[0]),o(),n(),s());const u=document.querySelector(".add-reminder"),p=document.querySelector(".modal"),h=document.querySelector(".modal-update"),L=document.querySelectorAll(".close-button"),g=document.querySelector("#create-reminder"),f=document.querySelector("#add-project");let E=0;function k(){const e=document.querySelectorAll(".delete-btn"),t=document.querySelectorAll(".edit-btn"),a=document.querySelectorAll(".circle"),i=document.querySelectorAll(".nav-item");e.forEach((function(e,t){e.setAttribute("data-task",t),e.addEventListener("click",(function(){var t;"delete-btn"==(t=e).classList?t.parentNode.parentNode.remove():"project"==t.parentNode.classList?t.parentNode.remove():console.log("error");let n=e.getAttribute("data-task");m[E].task.splice(n,1),r(m)}))})),t.forEach((function(e){e.addEventListener("click",(function(){h.classList.toggle("hidden")}))})),a.forEach((function(e,t){e.setAttribute("data-task",t),e.addEventListener("click",(function(){let t=e.getAttribute("data-task");console.log(E);let n=m[E].task[t];n&&n.toggleCompleted&&n.toggleCompleted.call(n),c(),o(E),k(),r(m)}))})),i.forEach((function(e,t){e.setAttribute("data-project",t),e.addEventListener("click",(function(){let t=e.getAttribute("data-project");m[t].projectName,function(e,t){d(),s(),n(t)}(0,t),function(e){c(),o(e)}(t),E=t,k()}))}))}u.addEventListener("click",(function(e){p.classList.remove("hidden")})),L.forEach((function(e){e.addEventListener("click",(function(){!function(e){e.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("hidden")}(e)}))})),g.addEventListener("click",((e,t=m[E])=>{c(),t.addTask(),o(E),p.classList.add("hidden"),k(),r(m)})),f.addEventListener("click",(e=>{m.push(i(document.querySelector("#project-name").value)),d(),console.log(E),s(),k(),r(m),console.log("button clicked")})),k()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Im1CQUlBLFNBQVNBLEVBQWlCQyxFQUFlQyxFQUFxQkMsRUFBaUJDLEVBQWtCQyxFQUFZQyxHQUV6RyxJQUFrQixJQUFmRCxFQUFvQixDQUNuQixNQUFNRSxFQUFxQkMsU0FBU0MsY0FBYyxpQ0FDNUNDLEVBQWNGLFNBQVNHLGNBQWMsT0FDM0NELEVBQVlFLFVBQVVDLElBQUksWUFDMUJILEVBQVlFLFVBQVVDLElBQUksYUFFMUIsTUFBTUMsRUFBWU4sU0FBU0csY0FBYyxPQUN6Q0csRUFBVUYsVUFBVUMsSUFBSSxVQUN4QkMsRUFBVUYsVUFBVUMsSUFBSSxhQUV4QixNQUFNRSxFQUFXUCxTQUFTRyxjQUFjLFFBQ3hDSSxFQUFTSCxVQUFVQyxJQUFJLFFBQ3ZCRSxFQUFTSCxVQUFVQyxJQUFJLGFBQ3ZCRSxFQUFTQyxZQUFjLEdBQUdmLElBRTFCLE1BQU1nQixFQUFrQlQsU0FBU0csY0FBYyxRQUMvQ00sRUFBZ0JMLFVBQVVDLElBQUksZUFDOUJJLEVBQWdCTCxVQUFVQyxJQUFJLGFBQzlCSSxFQUFnQkQsWUFBYyxHQUFHZCxJQUVqQyxNQUFNZ0IsRUFBZVYsU0FBU0csY0FBYyxPQUM1Q08sRUFBYU4sVUFBVUMsSUFBSSxjQUUzQixNQUFNTSxFQUFjWCxTQUFTRyxjQUFjLFFBQzNDUSxFQUFZUCxVQUFVQyxJQUFJLFlBQzFCTSxFQUFZUCxVQUFVQyxJQUFJLGFBQzFCTSxFQUFZSCxZQUFjLEdBQUdiLElBRTdCLE1BQU1pQixFQUFhWixTQUFTRyxjQUFjLE9BQzFDUyxFQUFXUixVQUFVQyxJQUFJLFFBQ3pCTyxFQUFXUixVQUFVQyxJQUFJLGtCQUN6Qk8sRUFBV0MsSUFBTSwrQkFDakJELEVBQVdFLElBQU0sT0FFakIsTUFBTUMsRUFBZWYsU0FBU0csY0FBYyxPQUM1Q1ksRUFBYVgsVUFBVUMsSUFBSSxVQUMzQlUsRUFBYVgsVUFBVUMsSUFBSSxrQkFDM0JVLEVBQWFGLElBQU0sbUNBQ25CRSxFQUFhRCxJQUFNLFFBQ25CQyxFQUFhQyxhQUFhLFlBQWFsQixHQUV2Q1ksRUFBYU8sWUFBWU4sR0FDekJELEVBQWFPLFlBQVlMLEdBQ3pCRixFQUFhTyxZQUFZRixHQUV6QmIsRUFBWWUsWUFBWVgsR0FDeEJKLEVBQVllLFlBQVlWLEdBQ3hCTCxFQUFZZSxZQUFZUixHQUN4QlAsRUFBWWUsWUFBWVAsR0FDeEJYLEVBQW1Ca0IsWUFBWWYsRUFFbkMsTUFBTSxJQUFtQixJQUFmTCxFQUFxQixDQUUzQixNQUFNcUIsRUFBb0JsQixTQUFTQyxjQUFjLHVCQUUzQ0MsRUFBY0YsU0FBU0csY0FBYyxPQUMzQ0QsRUFBWUUsVUFBVUMsSUFBSSxZQUUxQixNQUFNQyxFQUFZTixTQUFTRyxjQUFjLE9BQ3pDRyxFQUFVRixVQUFVQyxJQUFJLFVBQ3hCQyxFQUFVRixVQUFVQyxJQUFJLEdBQUdULEtBQzNCVSxFQUFVVSxhQUFhLFlBQWFsQixHQUVwQyxNQUFNUyxFQUFXUCxTQUFTRyxjQUFjLFFBQ3hDSSxFQUFTSCxVQUFVQyxJQUFJLFFBQ3ZCRSxFQUFTQyxZQUFjLEdBQUdmLElBRTFCLE1BQU1nQixFQUFrQlQsU0FBU0csY0FBYyxRQUMvQ00sRUFBZ0JMLFVBQVVDLElBQUksZUFDOUJJLEVBQWdCRCxZQUFjLEdBQUdkLElBRWpDLE1BQU1nQixFQUFlVixTQUFTRyxjQUFjLE9BQzVDTyxFQUFhTixVQUFVQyxJQUFJLGNBRTNCLE1BQU1NLEVBQWNYLFNBQVNHLGNBQWMsUUFDM0NRLEVBQVlQLFVBQVVDLElBQUksWUFDMUJNLEVBQVlILFlBQWMsR0FBR2IsSUFFN0IsTUFBTWlCLEVBQWFaLFNBQVNHLGNBQWMsT0FDMUNTLEVBQVdSLFVBQVVDLElBQUksWUFDekJPLEVBQVdDLElBQU0sK0JBQ2pCRCxFQUFXRSxJQUFNLE9BRWpCLE1BQU1DLEVBQWVmLFNBQVNHLGNBQWMsT0FDNUNZLEVBQWFYLFVBQVVDLElBQUksY0FDM0JVLEVBQWFGLElBQU0sbUNBQ25CRSxFQUFhRCxJQUFNLFFBQ25CQyxFQUFhQyxhQUFhLFlBQWFsQixHQUl2Q1ksRUFBYU8sWUFBWU4sR0FDekJELEVBQWFPLFlBQVlMLEdBQ3pCRixFQUFhTyxZQUFZRixHQUV6QmIsRUFBWWUsWUFBWVgsR0FDeEJKLEVBQVllLFlBQVlWLEdBQ3hCTCxFQUFZZSxZQUFZUixHQUN4QlAsRUFBWWUsWUFBWVAsR0FDeEJRLEVBQWtCRCxZQUFZZixFQUNsQyxDQUVKLENBSUEsU0FBU2lCLEVBQWVDLEVBQWFDLEdBQ2pDLE1BQU1DLEVBQXVCdEIsU0FBU0MsY0FBYyxvQkFFOUNzQixFQUFXdkIsU0FBU0csY0FBYyxNQUN4Q29CLEVBQVNuQixVQUFVQyxJQUFJLFlBQ3ZCa0IsRUFBU25CLFVBQVVDLElBQUksV0FDdkJrQixFQUFTUCxhQUFhLGVBQWdCSyxHQUV0QyxNQUFNRyxFQUFVeEIsU0FBU0csY0FBYyxPQUN2Q3FCLEVBQVFYLElBQU0sc0NBRWQsTUFBTVksRUFBcUJ6QixTQUFTRyxjQUFjLFFBQ2xEc0IsRUFBbUJqQixZQUFjLEdBQUdZLElBRXBDRyxFQUFTTixZQUFZTyxHQUNyQkQsRUFBU04sWUFBWVEsR0FFckJILEVBQXFCTCxZQUFZTSxFQUNyQyxDQU1BLFNBQVNHLEVBQW9CQyxFQUFlLEdBQ1ozQixTQUFTQyxjQUFjLHlCQUM5Qk8sWUFBYyxHQUFHb0IsRUFBa0JELEdBQWNQLGFBQzFFLENBTUEsU0FBU1MsSUFDb0I3QixTQUFTQyxjQUFjLG9CQUUvQjZCLFVBQVksRUFDakMsQ0FJQSxTQUFTQyxJQUNMLE1BQU1iLEVBQW9CbEIsU0FBU0MsY0FBYyx1QkFDdEJELFNBQVNDLGNBQWMsaUNBRS9CNkIsVUFBWSxHQUMvQlosRUFBa0JZLFVBQVksRUFDbEMsQ0FPQSxTQUFTRSxJQUNMLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJTCxFQUFrQk0sT0FBUUQsSUFDekNkLEVBQWVTLEVBQWtCSyxHQUFHYixZQUFhUSxFQUFrQkssR0FBR1osVUFFOUUsQ0FHQSxTQUFTYyxFQUFvQkMsRUFBVSxHQUNuQyxJQUFLLElBQUlILEVBQUksRUFBR0EsRUFBSUwsRUFBa0JRLEdBQVNDLEtBQUtILE9BQVFELElBQ3hEekMsRUFBaUJvQyxFQUFrQlEsR0FBU0MsS0FBS0osR0FBR3hDLGNBQWVtQyxFQUFrQlEsR0FBU0MsS0FBS0osR0FBR3ZDLG9CQUFxQmtDLEVBQWtCUSxHQUFTQyxLQUFLSixHQUFHdEMsZ0JBQWlCaUMsRUFBa0JRLEdBQVNDLEtBQUtKLEdBQUdyQyxpQkFBa0JnQyxFQUFrQlEsR0FBU0MsS0FBS0osR0FBR3BDLFdBQVkrQixFQUFrQlEsR0FBU0MsS0FBS0osR0FBR25DLFdBRTlULENDOUtBLE1BQU13QyxFQUFpQixDQUFDekMsR0FBYSxLQUNqQyxJQUFJSixFQUFnQk8sU0FBU3VDLGVBQWUsa0JBQWtCQyxNQUMxRDlDLEVBQXNCTSxTQUFTdUMsZUFBZSx3QkFBd0JDLE1BQ3RFNUMsRUFBbUJJLFNBQVN1QyxlQUFlLHFCQUFxQkMsTUFTcEUsTUFBTyxDQUNIL0MsZ0JBQ0FDLHNCQUNBQyxnQkFYa0JLLFNBQVN1QyxlQUFlLHFCQUFxQkMsTUFZL0Q1QyxtQkFDQUMsYUFDQTRDLGdCQVhKLFdBQ0lDLEtBQUs3QyxZQUFjNkMsS0FBSzdDLFdBQ3hCOEMsUUFBUUMsSUFBSSxvQkFBcUJGLEtBQUs3QyxXQUN4QyxFQVNFQyxXQWRhK0MsS0FBS0MsTUFlckIsRUFLQ0MsRUFBaUJDLElBV1osQ0FDSEMsUUFQSixXQUNJUCxLQUFLTCxLQUFLYSxLQUFLWixJQUNuQixFQU1JbEIsWUFaYzRCLEVBYWRYLEtBWk8sR0FhUGhCLFVBWmN3QixLQUFLQyxRQW9CdkIsU0FBU0ssRUFBY0MsR0FDbkJDLGFBQWFDLFFBQVEsbUJBQW9CQyxLQUFLQyxVQUFVSixJQUN4RFQsUUFBUUMsSUFBSVcsS0FBS0MsVUFBVUosR0FDL0IsQ0FLQSxTQUFTSyxJQUNULElBQUlDLEVBQW9CLEdBRXhCLE9BREFBLEVBQW9CSCxLQUFLSSxNQUFNTixhQUFhTyxRQUFRLHFCQUM3Q0YsQ0FDUCxDQUlKLElBQUk5QixFQUFvQixHQUdNLE9BQTNCNkIsS0FDQzdCLEVBQWtCc0IsS0FBS0gsRUFBYyxVQUNyQ25CLEVBQWtCLEdBQUdxQixVQUNyQnJCLEVBQWtCLEdBQUdTLEtBQUssR0FBR3hDLFdBQzdCK0IsRUFBa0IsR0FBR1MsS0FBSyxHQUFHM0Msb0JBQXNCLG9CQUNuRGtDLEVBQWtCLEdBQUdTLEtBQUssR0FBRzVDLGNBQWdCLDRCQUM3Q21DLEVBQWtCLEdBQUdTLEtBQUssR0FBRzFDLGdCQUFrQixVQUMvQ2lDLEVBQWtCLEdBQUdTLEtBQUssR0FBR3pDLGlCQUFtQixTQUVoRHVDLElBQ0FULElBQ0FNLEtBSXdDLGlCQUEzQnlCLE1BQ2I3QixFQUFvQjZCLElBQ3BCZCxRQUFRQyxJQUFJaEIsRUFBa0IsSUFDOUJPLElBQ0FULElBQ0FNLEtDcEZKLE1BQU02QixFQUFpQjdELFNBQVNDLGNBQWMsaUJBQ3hDNkQsRUFBWTlELFNBQVNDLGNBQWMsVUFDbkM4RCxFQUFhL0QsU0FBU0MsY0FBYyxpQkFDcEMrRCxFQUFtQmhFLFNBQVNpRSxpQkFBaUIsaUJBQzdDQyxFQUFvQmxFLFNBQVNDLGNBQWMsb0JBQzNDa0UsRUFBbUJuRSxTQUFTQyxjQUFjLGdCQUVoRCxJQUFJbUUsRUFBc0IsRUFFMUIsU0FBU0MsSUFFTCxNQUFNQyxFQUFvQnRFLFNBQVNpRSxpQkFBaUIsZUFDOUNNLEVBQWtCdkUsU0FBU2lFLGlCQUFpQixhQUM1Q3hCLEVBQWtCekMsU0FBU2lFLGlCQUFpQixXQUM1Q08sRUFBYXhFLFNBQVNpRSxpQkFBaUIsYUFFMUNLLEVBQWtCRyxTQUFTLFNBQVV4QyxFQUFHeUMsR0FDdkN6QyxFQUFFakIsYUFBYSxZQUFhMEQsR0FDNUJ6QyxFQUFFMEMsaUJBQWlCLFNBQVMsV0FvRHBDLElBQXVCQyxFQUNRLGVBRFJBLEVBbkRDM0MsR0FvRE43QixVQUNWd0UsRUFBUUMsV0FBV0EsV0FBV0MsU0FDVSxXQUFoQ0YsRUFBUUMsV0FBV3pFLFVBQzNCd0UsRUFBUUMsV0FBV0MsU0FDZm5DLFFBQVFDLElBQUksU0F2RGQsSUFBSW1DLEVBQVk5QyxFQUFFK0MsYUFBYSxhQUMvQnBELEVBQWtCd0MsR0FBcUIvQixLQUFLNEMsT0FBT0YsRUFBVyxHQUMvRDVCLEVBQWN2QixFQUNmLEdBQ0YsSUFFRTJDLEVBQWdCRSxTQUFTLFNBQVV4QyxHQUNqQ0EsRUFBRTBDLGlCQUFpQixTQUFTLFdBQzFCWixFQUFXM0QsVUFBVThFLE9BQU8sU0FDOUIsR0FDRixJQUVBekMsRUFBZ0JnQyxTQUFRLFNBQVV4QyxFQUFHeUMsR0FDakN6QyxFQUFFakIsYUFBYSxZQUFhMEQsR0FDNUJ6QyxFQUFFMEMsaUJBQWlCLFNBQVMsV0FDMUIsSUFBSUksRUFBWTlDLEVBQUUrQyxhQUFhLGFBQy9CckMsUUFBUUMsSUFBSXdCLEdBQ1osSUFBSWUsRUFBV3ZELEVBQWtCd0MsR0FBcUIvQixLQUFLMEMsR0FDdkRJLEdBQVlBLEVBQVMxQyxpQkFDeEIwQyxFQUFTMUMsZ0JBQWdCMkMsS0FBS0QsR0FDL0JwRCxJQUNBSSxFQUFvQmlDLEdBQ3BCQyxJQUNBbEIsRUFBY3ZCLEVBQ2hCLEdBQ0YsSUFHRjRDLEVBQVdDLFNBQVEsU0FBVXhDLEVBQUd5QyxHQUM1QnpDLEVBQUVqQixhQUFhLGVBQWdCMEQsR0FDL0J6QyxFQUFFMEMsaUJBQWlCLFNBQVMsV0FDMUIsSUFBSWhELEVBQWVNLEVBQUUrQyxhQUFhLGdCQUNwQnBELEVBQWtCRCxHQUFjUCxZRjBINUQsU0FBZ0NBLEVBQVlPLEdBQ3hDRSxJQUNBRyxJQUNBTixFQUFvQkMsRUFDeEIsQ0U3SGMwRCxDQUF1QmpELEVBQVVULEdGK0gvQyxTQUFrQ0EsR0FDOUJJLElBQ0FJLEVBQW9CUixFQUN4QixDRWpJYzJELENBQXlCM0QsR0FDekJ5QyxFQUFzQnpDLEVBQ3RCMEMsR0FFRixHQUNGLEdBRVYsQ0FxQkFSLEVBQWVjLGlCQUFpQixTQUFTLFNBQXFCWSxHQUMxRHpCLEVBQVUxRCxVQUFVMEUsT0FBTyxTQUMvQixJQUdBZCxFQUFpQlMsU0FBUyxTQUFVRyxHQUNsQ0EsRUFBUUQsaUJBQWlCLFNBQVMsWUF0QnBDLFNBQW9CQyxHQUNkQSxFQUFRWSxjQUFjQSxjQUFjQSxjQUFjQSxjQUFjQSxjQUFjcEYsVUFBVUMsSUFBSSxTQUM5RixDQXFCQW9GLENBQVdiLEVBQ2IsR0FDRixJQUdBVixFQUFrQlMsaUJBQWlCLFNBQVEsQ0FBQ1ksRUFBR25ELEVBQVVSLEVBQWtCd0MsTUFDdkVyQyxJQUNBSyxFQUFRYSxVQUNSZCxFQUFvQmlDLEdBQ3BCTixFQUFVMUQsVUFBVUMsSUFBSSxVQUN4QmdFLElBQ0FsQixFQUFjdkIsRUFBaUIsSUFNbkN1QyxFQUFpQlEsaUJBQWlCLFNBQVNZLElBQ3ZDM0QsRUFBa0JzQixLQUFLSCxFQUFjL0MsU0FBU0MsY0FBYyxpQkFBaUJ1QyxRQUM3RVgsSUFDQWMsUUFBUUMsSUFBSXdCLEdBQ1pwQyxJQUNBcUMsSUFDQWxCLEVBQWN2QixHQUVsQmUsUUFBUUMsSUFBSSxpQkFBZ0IsSUN4RzVCeUIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3JlbWluZC1tZS8uL3NyYy9KUy9kaXNwbGF5LmpzIiwid2VicGFjazovL3JlbWluZC1tZS8uL3NyYy9KUy9jb250cm9sLmpzIiwid2VicGFjazovL3JlbWluZC1tZS8uL3NyYy9KUy9idXR0b25zLmpzIiwid2VicGFjazovL3JlbWluZC1tZS8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9qZWN0c0NvbnRhaW5lciB9IGZyb20gXCIuL2NvbnRyb2xcIjtcblxuLy8gRE9NIEVsZW1lbnQgQ3JlYXRpb25zXG5cbmZ1bmN0aW9uIGRpc3BsYXlSZW1pbmRlcnMocmVtaW5kZXJUaXRsZSwgcmVtaW5kZXJEZXNjcmlwdGlvbiwgcmVtaW5kZXJEdWVEYXRlLCByZW1pbmRlclByaW9yaXR5LCBpc0NvbXBsZXRlLCByZW1pbmRlcklkKXtcblxuICAgIGlmKGlzQ29tcGxldGUgPT09IHRydWUpe1xuICAgICAgICBjb25zdCBjb21wbGV0ZWRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbWluZGVyLWNvbnRhaW5lci1jb21wbGV0ZWRcIilcbiAgICAgICAgY29uc3QgcmVtaW5kZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZW1pbmRlckRpdi5jbGFzc0xpc3QuYWRkKFwicmVtaW5kZXJcIik7XG4gICAgICAgIHJlbWluZGVyRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIik7XG5cbiAgICAgICAgY29uc3QgY2lyY2xlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2lyY2xlRGl2LmNsYXNzTGlzdC5hZGQoXCJjaXJjbGVcIik7XG4gICAgICAgIGNpcmNsZURpdi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRhc2tTcGFuLmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpO1xuICAgICAgICB0YXNrU3Bhbi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpO1xuICAgICAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9IGAke3JlbWluZGVyVGl0bGV9YDtcblxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25TcGFuLmNsYXNzTGlzdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25TcGFuLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIik7XG4gICAgICAgIGRlc2NyaXB0aW9uU3Bhbi50ZXh0Q29udGVudCA9IGAke3JlbWluZGVyRGVzY3JpcHRpb259YDtcblxuICAgICAgICBjb25zdCByaWdodFNpZGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByaWdodFNpZGVEaXYuY2xhc3NMaXN0LmFkZChcInJpZ2h0LXNpZGVcIik7XG5cbiAgICAgICAgY29uc3QgZHVlRGF0ZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZHVlRGF0ZVNwYW4uY2xhc3NMaXN0LmFkZChcImR1ZS1kYXRlXCIpO1xuICAgICAgICBkdWVEYXRlU3Bhbi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpO1xuICAgICAgICBkdWVEYXRlU3Bhbi50ZXh0Q29udGVudCA9IGAke3JlbWluZGVyRHVlRGF0ZX1gO1xuXG4gICAgICAgIGNvbnN0IGVkaXRCdG5JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBlZGl0QnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIpO1xuICAgICAgICBlZGl0QnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWQtaWNvblwiKTtcbiAgICAgICAgZWRpdEJ0bkltZy5zcmMgPSBcIi9zcmMvaWNvbnMvdGV4dC1ib3gtZWRpdC5zdmdcIjtcbiAgICAgICAgZWRpdEJ0bkltZy5hbHQgPSBcImVkaXRcIjtcblxuICAgICAgICBjb25zdCBkZWxldGVCdG5JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBkZWxldGVCdG5JbWcuY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgICAgICAgZGVsZXRlQnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWQtaWNvblwiKTtcbiAgICAgICAgZGVsZXRlQnRuSW1nLnNyYyA9IFwiL3NyYy9pY29ucy90cmFzaC1jYW4tb3V0bGluZS5zdmdcIjtcbiAgICAgICAgZGVsZXRlQnRuSW1nLmFsdCA9IFwidHJhc2hcIjtcbiAgICAgICAgZGVsZXRlQnRuSW1nLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrJywgcmVtaW5kZXJJZCk7XG5cbiAgICAgICAgcmlnaHRTaWRlRGl2LmFwcGVuZENoaWxkKGR1ZURhdGVTcGFuKTtcbiAgICAgICAgcmlnaHRTaWRlRGl2LmFwcGVuZENoaWxkKGVkaXRCdG5JbWcpO1xuICAgICAgICByaWdodFNpZGVEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuSW1nKTtcblxuICAgICAgICByZW1pbmRlckRpdi5hcHBlbmRDaGlsZChjaXJjbGVEaXYpO1xuICAgICAgICByZW1pbmRlckRpdi5hcHBlbmRDaGlsZCh0YXNrU3Bhbik7XG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uU3Bhbik7XG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKHJpZ2h0U2lkZURpdik7XG4gICAgICAgIGNvbXBsZXRlZENvbnRhaW5lci5hcHBlbmRDaGlsZChyZW1pbmRlckRpdilcblxuICAgIH1lbHNlIGlmIChpc0NvbXBsZXRlID09PSBmYWxzZSl7XG5cbiAgICAgICAgY29uc3QgcmVtaW5kZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbWluZGVyLWNvbnRhaW5lclwiKVxuXG4gICAgICAgIGNvbnN0IHJlbWluZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuY2xhc3NMaXN0LmFkZChcInJlbWluZGVyXCIpO1xuXG4gICAgICAgIGNvbnN0IGNpcmNsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNpcmNsZURpdi5jbGFzc0xpc3QuYWRkKFwiY2lyY2xlXCIpO1xuICAgICAgICBjaXJjbGVEaXYuY2xhc3NMaXN0LmFkZChgJHtyZW1pbmRlclByaW9yaXR5fWApO1xuICAgICAgICBjaXJjbGVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXRhc2snLCByZW1pbmRlcklkKVxuXG4gICAgICAgIGNvbnN0IHRhc2tTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRhc2tTcGFuLmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpO1xuICAgICAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9IGAke3JlbWluZGVyVGl0bGV9YDtcblxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25TcGFuLmNsYXNzTGlzdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25TcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJEZXNjcmlwdGlvbn1gO1xuXG4gICAgICAgIGNvbnN0IHJpZ2h0U2lkZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHJpZ2h0U2lkZURpdi5jbGFzc0xpc3QuYWRkKFwicmlnaHQtc2lkZVwiKTtcblxuICAgICAgICBjb25zdCBkdWVEYXRlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkdWVEYXRlU3Bhbi5jbGFzc0xpc3QuYWRkKFwiZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVTcGFuLnRleHRDb250ZW50ID0gYCR7cmVtaW5kZXJEdWVEYXRlfWA7XG5cbiAgICAgICAgY29uc3QgZWRpdEJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGVkaXRCdG5JbWcuY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xuICAgICAgICBlZGl0QnRuSW1nLnNyYyA9IFwiL3NyYy9pY29ucy90ZXh0LWJveC1lZGl0LnN2Z1wiO1xuICAgICAgICBlZGl0QnRuSW1nLmFsdCA9IFwiZWRpdFwiO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGRlbGV0ZUJ0bkltZy5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLWJ0blwiKTtcbiAgICAgICAgZGVsZXRlQnRuSW1nLnNyYyA9IFwiL3NyYy9pY29ucy90cmFzaC1jYW4tb3V0bGluZS5zdmdcIjtcbiAgICAgICAgZGVsZXRlQnRuSW1nLmFsdCA9IFwidHJhc2hcIjtcbiAgICAgICAgZGVsZXRlQnRuSW1nLnNldEF0dHJpYnV0ZSgnZGF0YS10YXNrJywgcmVtaW5kZXJJZCk7XG5cblxuICAgIFxuICAgICAgICByaWdodFNpZGVEaXYuYXBwZW5kQ2hpbGQoZHVlRGF0ZVNwYW4pO1xuICAgICAgICByaWdodFNpZGVEaXYuYXBwZW5kQ2hpbGQoZWRpdEJ0bkltZyk7XG4gICAgICAgIHJpZ2h0U2lkZURpdi5hcHBlbmRDaGlsZChkZWxldGVCdG5JbWcpO1xuXG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKGNpcmNsZURpdik7XG4gICAgICAgIHJlbWluZGVyRGl2LmFwcGVuZENoaWxkKHRhc2tTcGFuKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25TcGFuKTtcbiAgICAgICAgcmVtaW5kZXJEaXYuYXBwZW5kQ2hpbGQocmlnaHRTaWRlRGl2KTtcbiAgICAgICAgcmVtaW5kZXJDb250YWluZXIuYXBwZW5kQ2hpbGQocmVtaW5kZXJEaXYpXG4gICAgfVxuXG59XG5cblxuXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdChwcm9qZWN0TmFtZSwgcHJvamVjdElkKXtcbiAgICBjb25zdCBwcm9qZWN0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1saXN0LXVsXCIpXG5cbiAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKFwibmF2LWl0ZW1cIilcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKVxuICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0JywgcHJvamVjdElkKTtcblxuICAgIGNvbnN0IGxpc3RJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpXG4gICAgbGlzdEltZy5zcmMgPSBcIi9zcmMvaWNvbnMvZm9ybWF0LWxpc3QtYnVsbGV0ZWQuc3ZnXCJcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgcHJvamVjdFRpdGxlSG9sZGVyLnRleHRDb250ZW50ID0gYCR7cHJvamVjdE5hbWV9YFxuXG4gICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQobGlzdEltZylcbiAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGVIb2xkZXIpXG5cbiAgICBwcm9qZWN0TGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0SXRlbSlcbn1cblxuXG5cblxuXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdFRpdGxlKHByb2plY3RJbmRleCA9IDApe1xuICAgIGNvbnN0IHByb2plY3ROYW1lRGlzcGxheWVyPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGl0bGUtaG9sZGVyXCIpXG4gICAgcHJvamVjdE5hbWVEaXNwbGF5ZXIudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0c0NvbnRhaW5lcltwcm9qZWN0SW5kZXhdLnByb2plY3ROYW1lfWBcbn1cblxuXG5cbi8vIGNsZWFyIEZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBjbGVhclByb2plY3RMaXN0KCl7XG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1saXN0LXVsXCIpXG5cbiAgICBwcm9qZWN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcbn1cblxuXG5cbmZ1bmN0aW9uIGNsZWFyUmVtaW5kZXJMaXN0KCl7XG4gICAgY29uc3QgcmVtaW5kZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbWluZGVyLWNvbnRhaW5lclwiKVxuICAgIGNvbnN0IGNvbXBsZXRlZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtaW5kZXItY29udGFpbmVyLWNvbXBsZXRlZFwiKVxuXG4gICAgY29tcGxldGVkQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcbiAgICByZW1pbmRlckNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiXG59XG5cblxuXG5cbi8vIFJlbmRlciBGdW5jdGlvbnNcblxuZnVuY3Rpb24gcmVuZGVyUHJvamVjdExpc3QoKXtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvamVjdHNDb250YWluZXIubGVuZ3RoOyBpKyspe1xuICAgICAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0c0NvbnRhaW5lcltpXS5wcm9qZWN0TmFtZSwgcHJvamVjdHNDb250YWluZXJbaV0ucHJvamVjdElkKVxuICAgIH0gICBcbn1cblxuXG5mdW5jdGlvbiByZW5kZXJSZW1pbmRlcnNMaXN0KHByb2plY3QgPSAwKXtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RdLnRhc2subGVuZ3RoOyBpKyspe1xuICAgICAgICBkaXNwbGF5UmVtaW5kZXJzKHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RdLnRhc2tbaV0ucmVtaW5kZXJUaXRsZSwgcHJvamVjdHNDb250YWluZXJbcHJvamVjdF0udGFza1tpXS5yZW1pbmRlckRlc2NyaXB0aW9uLCBwcm9qZWN0c0NvbnRhaW5lcltwcm9qZWN0XS50YXNrW2ldLnJlbWluZGVyRHVlRGF0ZSwgcHJvamVjdHNDb250YWluZXJbcHJvamVjdF0udGFza1tpXS5yZW1pbmRlclByaW9yaXR5LCBwcm9qZWN0c0NvbnRhaW5lcltwcm9qZWN0XS50YXNrW2ldLmlzQ29tcGxldGUsIHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RdLnRhc2tbaV0ucmVtaW5kZXJJZClcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gdXBkYXRlRGlzcGxheWVkUHJvamVjdChwcm9qZWN0TmFtZSxwcm9qZWN0SW5kZXgpe1xuICAgIGNsZWFyUHJvamVjdExpc3QoKVxuICAgIHJlbmRlclByb2plY3RMaXN0KHByb2plY3RJbmRleCAsIHByb2plY3RJbmRleClcbiAgICBkaXNwbGF5UHJvamVjdFRpdGxlKHByb2plY3RJbmRleClcbn1cblxuZnVuY3Rpb24gdXBkYXRlRGlzcGxheWVkUmVtaW5kZXJzKHByb2plY3RJbmRleCl7XG4gICAgY2xlYXJSZW1pbmRlckxpc3QoKVxuICAgIHJlbmRlclJlbWluZGVyc0xpc3QocHJvamVjdEluZGV4KVxufVxuXG5cbmV4cG9ydHtkaXNwbGF5UmVtaW5kZXJzLCBkaXNwbGF5UHJvamVjdFRpdGxlLCBkaXNwbGF5UHJvamVjdCwgcmVuZGVyUmVtaW5kZXJzTGlzdCwgY2xlYXJSZW1pbmRlckxpc3QsIGNsZWFyUHJvamVjdExpc3QsIHJlbmRlclByb2plY3RMaXN0LCB1cGRhdGVEaXNwbGF5ZWRQcm9qZWN0LHVwZGF0ZURpc3BsYXllZFJlbWluZGVyc30iLCJpbXBvcnQgeyByZW5kZXJSZW1pbmRlcnNMaXN0LCByZW5kZXJQcm9qZWN0TGlzdCwgZGlzcGxheVByb2plY3RUaXRsZSB9IGZyb20gXCIuL2Rpc3BsYXlcIjtcbmltcG9ydCB7IGFkZExpc3RlbmVycyB9IGZyb20gXCIuL2J1dHRvbnNcIjtcblxuY29uc3QgY3JlYXRlUmVtaW5kZXIgPSAoaXNDb21wbGV0ZSA9IGZhbHNlKSA9PiB7XG4gICAgbGV0IHJlbWluZGVyVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbWluZGVyLXRpdGxlXCIpLnZhbHVlXG4gICAgbGV0IHJlbWluZGVyRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbWluZGVyLWRlc2NyaXB0aW9uXCIpLnZhbHVlXG4gICAgbGV0IHJlbWluZGVyUHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbWluZGVyLXByaW9yaXR5XCIpLnZhbHVlXG4gICAgbGV0IHJlbWluZGVyRHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVtaW5kZXItZHVlLWRhdGVcIikudmFsdWVcbiAgICBsZXQgcmVtaW5kZXJJZCA9IERhdGUubm93KClcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCgpIHtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gIXRoaXMuaXNDb21wbGV0ZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJpc0NvbXBsZXRlIHNldCB0b1wiLCB0aGlzLmlzQ29tcGxldGUpO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtaW5kZXJUaXRsZSxcbiAgICAgICAgcmVtaW5kZXJEZXNjcmlwdGlvbixcbiAgICAgICAgcmVtaW5kZXJEdWVEYXRlLFxuICAgICAgICByZW1pbmRlclByaW9yaXR5LFxuICAgICAgICBpc0NvbXBsZXRlLFxuICAgICAgICB0b2dnbGVDb21wbGV0ZWQsXG4gICAgICAgIHJlbWluZGVySWRcbiAgICB9O1xufTtcblxuXG5cbmNvbnN0IGNyZWF0ZVByb2plY3QgPSAobmFtZSkgPT4ge1xuICAgIGxldCBwcm9qZWN0TmFtZSA9IG5hbWVcbiAgICBsZXQgdGFzayA9IFtdXG4gICAgY29uc3QgcHJvamVjdElkID0gRGF0ZS5ub3coKVxuXG4gICAgZnVuY3Rpb24gYWRkVGFzaygpe1xuICAgICAgICB0aGlzLnRhc2sucHVzaChjcmVhdGVSZW1pbmRlcigpKVxuICAgIH1cblxuIFxuXG4gICAgcmV0dXJuIHsgXG4gICAgICAgIGFkZFRhc2ssXG4gICAgICAgIHByb2plY3ROYW1lLFxuICAgICAgICB0YXNrLFxuICAgICAgICBwcm9qZWN0SWRcbiAgICB9O1xuXG4gIH07XG5cblxuXG5cbiAgICBmdW5jdGlvbiBzdG9yZVByb2plY3RzKHByb2plY3RMaXN0KXtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsaXN0LW9mLXByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSlcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKVxuICAgIH1cblxuXG5cblxuICAgIGZ1bmN0aW9uIGdldFByb2plY3RzRnJvbVN0b3JlKCl7XG4gICAgbGV0IHJldHJpZXZlZFByb2plY3RzID0gW11cbiAgICByZXRyaWV2ZWRQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsaXN0LW9mLXByb2plY3RzXCIpKVxuICAgIHJldHVybiByZXRyaWV2ZWRQcm9qZWN0c1xuICAgIH1cblxuXG5cbmxldCBwcm9qZWN0c0NvbnRhaW5lciA9IFtdXG5cblxuaWYoZ2V0UHJvamVjdHNGcm9tU3RvcmUoKSA9PT0gbnVsbCl7XG4gICAgcHJvamVjdHNDb250YWluZXIucHVzaChjcmVhdGVQcm9qZWN0KFwiSW5ib3hcIikpXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0uYWRkVGFzaygpXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0udGFza1swXS5pc0NvbXBsZXRlXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0udGFza1swXS5yZW1pbmRlckRlc2NyaXB0aW9uID0gXCJXYXNoIFdvcmsgQ2xvdGhlc1wiXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0udGFza1swXS5yZW1pbmRlclRpdGxlID0gXCJTZXBhcmF0ZSBMaWdodHMgYW5kIERhcmtzXCJcbiAgICBwcm9qZWN0c0NvbnRhaW5lclswXS50YXNrWzBdLnJlbWluZGVyRHVlRGF0ZSA9IFwiMy0yMS0yM1wiXG4gICAgcHJvamVjdHNDb250YWluZXJbMF0udGFza1swXS5yZW1pbmRlclByaW9yaXR5ID0gXCJtZWRpdW1cIlxuICAgIFxuICAgIHJlbmRlclJlbWluZGVyc0xpc3QoKVxuICAgIGRpc3BsYXlQcm9qZWN0VGl0bGUoKVxuICAgIHJlbmRlclByb2plY3RMaXN0KClcbiAgICBcblxuXG59ZWxzZSBpZiAodHlwZW9mIGdldFByb2plY3RzRnJvbVN0b3JlKCkgPT09IFwib2JqZWN0XCIpe1xuICAgIHByb2plY3RzQ29udGFpbmVyID0gZ2V0UHJvamVjdHNGcm9tU3RvcmUoKVxuICAgIGNvbnNvbGUubG9nKHByb2plY3RzQ29udGFpbmVyWzBdKVxuICAgIHJlbmRlclJlbWluZGVyc0xpc3QoKVxuICAgIGRpc3BsYXlQcm9qZWN0VGl0bGUoKVxuICAgIHJlbmRlclByb2plY3RMaXN0KClcbiAgIFxufVxuXG5cbmV4cG9ydHtjcmVhdGVSZW1pbmRlcixjcmVhdGVQcm9qZWN0LCBnZXRQcm9qZWN0c0Zyb21TdG9yZSwgc3RvcmVQcm9qZWN0cywgcHJvamVjdHNDb250YWluZXJ9XG4gIFxuXG4iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBwcm9qZWN0c0NvbnRhaW5lciwgdG9nZ2xlQ29tcGxldGVkLCBjcmVhdGVSZW1pbmRlciwgc3RvcmVQcm9qZWN0c30gZnJvbSBcIi4vY29udHJvbFwiXG5pbXBvcnQgeyBjbGVhclJlbWluZGVyTGlzdCwgcmVuZGVyUmVtaW5kZXJzTGlzdCwgZGlzcGxheVByb2plY3QsIHJlbmRlclByb2plY3RMaXN0LCBjbGVhclByb2plY3RMaXN0LCB1cGRhdGVEaXNwbGF5ZWRQcm9qZWN0LCB1cGRhdGVEaXNwbGF5ZWRSZW1pbmRlcnMgfSBmcm9tIFwiLi9kaXNwbGF5XCJcblxuXG4vLyBET00gQ2FjaGVcblxuY29uc3QgYWRkUmVtaW5kZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1yZW1pbmRlclwiKVxuY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKVxuY29uc3QgdXBkYXRlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtdXBkYXRlXCIpXG5jb25zdCBjbG9zZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbG9zZS1idXR0b25cIilcbmNvbnN0IGNyZWF0ZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVhdGUtcmVtaW5kZXJcIilcbmNvbnN0IGNyZWF0ZVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wcm9qZWN0XCIpXG5cbmxldCBjdXJyZW50UHJvamVjdEluZGV4ID0gMFxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnMoKXtcblxuICAgIGNvbnN0IGRlbGV0ZVJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZWxldGUtYnRuXCIpXG4gICAgY29uc3QgZWRpdFJlbWluZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWJ0blwiKVxuICAgIGNvbnN0IHRvZ2dsZUNvbXBsZXRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2lyY2xlXCIpXG4gICAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LWl0ZW1cIilcbiAgICAgIFxuICAgICAgIGRlbGV0ZVJlbWluZGVyQnRuLmZvckVhY2goIGZ1bmN0aW9uIChpLCBpbmRleCwgKSB7XG4gICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIsIGluZGV4KTtcbiAgICAgICAgaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVtb3ZlRGlzcGxheShpKVxuICAgICAgICAgIGxldCB0YXNrSW5kZXggPSBpLmdldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiKTtcbiAgICAgICAgICBwcm9qZWN0c0NvbnRhaW5lcltjdXJyZW50UHJvamVjdEluZGV4XS50YXNrLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xuICAgICAgICAgc3RvcmVQcm9qZWN0cyhwcm9qZWN0c0NvbnRhaW5lcilcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgICBlZGl0UmVtaW5kZXJCdG4uZm9yRWFjaCggZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICBpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICB0b2dnbGVDb21wbGV0ZWQuZm9yRWFjaChmdW5jdGlvbiAoaSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIsIGluZGV4KTtcbiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IHRhc2tJbmRleCA9IGkuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50UHJvamVjdEluZGV4KVxuICAgICAgICAgICAgICBsZXQgcmVtaW5kZXIgPSBwcm9qZWN0c0NvbnRhaW5lcltjdXJyZW50UHJvamVjdEluZGV4XS50YXNrW3Rhc2tJbmRleF07XG4gICAgICAgICAgICAgIGlmIChyZW1pbmRlciAmJiByZW1pbmRlci50b2dnbGVDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgIHJlbWluZGVyLnRvZ2dsZUNvbXBsZXRlZC5jYWxsKHJlbWluZGVyKX1cbiAgICAgICAgICAgICAgY2xlYXJSZW1pbmRlckxpc3QoKVxuICAgICAgICAgICAgICByZW5kZXJSZW1pbmRlcnNMaXN0KGN1cnJlbnRQcm9qZWN0SW5kZXgpXG4gICAgICAgICAgICAgIGFkZExpc3RlbmVycygpXG4gICAgICAgICAgICAgIHN0b3JlUHJvamVjdHMocHJvamVjdHNDb250YWluZXIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHByb2plY3RCdG4uZm9yRWFjaChmdW5jdGlvbiAoaSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGkuc2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIsIGluZGV4KTtcbiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IHByb2plY3RJbmRleCA9IGkuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIpO1xuICAgICAgICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RzQ29udGFpbmVyW3Byb2plY3RJbmRleF0ucHJvamVjdE5hbWU7XG4gICAgICAgICAgICAgIHVwZGF0ZURpc3BsYXllZFByb2plY3QocHJvamVjdCAsIHByb2plY3RJbmRleClcbiAgICAgICAgICAgICAgdXBkYXRlRGlzcGxheWVkUmVtaW5kZXJzKHByb2plY3RJbmRleClcbiAgICAgICAgICAgICAgY3VycmVudFByb2plY3RJbmRleCA9IHByb2plY3RJbmRleFxuICAgICAgICAgICAgICBhZGRMaXN0ZW5lcnMoKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbn1cblxuXG4vLyBSZW1pbmRlciBpbnB1dCBmb3Jtc1xuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKGVsZW1lbnQpe1xuICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgIH1cbiAgXG5mdW5jdGlvbiByZW1vdmVEaXNwbGF5KGVsZW1lbnQpe1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0ID09IFwiZGVsZXRlLWJ0blwiKXtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlKClcbiAgICAgIH1lbHNlIGlmIChlbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0ID09IFwicHJvamVjdFwiKXtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZSgpXG4gICAgICB9ZWxzZSBjb25zb2xlLmxvZyhcImVycm9yXCIpXG5cbn1cblxuXG5cblxuYWRkUmVtaW5kZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKGUpe1xuICAgIGlucHV0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG59KTtcblxuXG5jbG9zZVJlbWluZGVyQnRuLmZvckVhY2goIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIGNsb3NlTW9kYWwoZWxlbWVudClcbiAgfSlcbn0pO1xuXG5cbmNyZWF0ZVJlbWluZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlLCBwcm9qZWN0ID0gcHJvamVjdHNDb250YWluZXJbY3VycmVudFByb2plY3RJbmRleF0pID0+IHsgICAgXG4gICAgY2xlYXJSZW1pbmRlckxpc3QoKVxuICAgIHByb2plY3QuYWRkVGFzaygpXG4gICAgcmVuZGVyUmVtaW5kZXJzTGlzdChjdXJyZW50UHJvamVjdEluZGV4KVxuICAgIGlucHV0Rm9ybS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgYWRkTGlzdGVuZXJzKClcbiAgICBzdG9yZVByb2plY3RzKHByb2plY3RzQ29udGFpbmVyKVxufSk7XG5cblxuLy8gY3JlYXRlIHByb2plY3QgYnV0dG9uc1xuXG5jcmVhdGVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlKSA9PiB7ICAgIFxuICAgIHByb2plY3RzQ29udGFpbmVyLnB1c2goY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbmFtZVwiKS52YWx1ZSkpXG4gICAgY2xlYXJQcm9qZWN0TGlzdCgpXG4gICAgY29uc29sZS5sb2coY3VycmVudFByb2plY3RJbmRleClcbiAgICByZW5kZXJQcm9qZWN0TGlzdChjdXJyZW50UHJvamVjdEluZGV4KVxuICAgIGFkZExpc3RlbmVycygpXG4gICAgc3RvcmVQcm9qZWN0cyhwcm9qZWN0c0NvbnRhaW5lcilcblxuY29uc29sZS5sb2coXCJidXR0b24gY2xpY2tlZFwiKVxufSk7XG5cblxuXG5cblxuICBleHBvcnQge2FkZExpc3RlbmVyc30iLCJpbXBvcnQge2FkZExpc3RlbmVyc30gZnJvbSAnLi9KUy9idXR0b25zLmpzJ1xuaW1wb3J0IHsgY3JlYXRlUmVtaW5kZXIsIFByb2plY3QsIHByb2plY3RzQ29udGFpbmVyLCBnZXRQcm9qZWN0c0Zyb21TdG9yZSB9IGZyb20gJy4vSlMvY29udHJvbCdcbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0TGlzdCwgZGlzcGxheVByb2plY3RUaXRsZSwgZGlzcGxheVJlbWluZGVycywgcmVuZGVyUmVtaW5kZXJzTGlzdCB9IGZyb20gJy4vSlMvZGlzcGxheSdcblxuLy8gd2luZG93LmRpc3BsYXlSZW1pbmRlcnMgPSBkaXNwbGF5UmVtaW5kZXJzXG5cblxuXG4vLyB3aW5kb3cuaW5ib3ggPSBpbmJveFxuXG4vLyB3aW5kb3cuZGlzcGxheVByb2plY3RUaXRsZSA9IGRpc3BsYXlQcm9qZWN0VGl0bGVcblxuLy8gd2luZG93LmRpc3BsYXlQcm9qZWN0TGlzdCA9IGRpc3BsYXlQcm9qZWN0TGlzdFxuXG5cblxuYWRkTGlzdGVuZXJzKCkiXSwibmFtZXMiOlsiZGlzcGxheVJlbWluZGVycyIsInJlbWluZGVyVGl0bGUiLCJyZW1pbmRlckRlc2NyaXB0aW9uIiwicmVtaW5kZXJEdWVEYXRlIiwicmVtaW5kZXJQcmlvcml0eSIsImlzQ29tcGxldGUiLCJyZW1pbmRlcklkIiwiY29tcGxldGVkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVtaW5kZXJEaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiY2lyY2xlRGl2IiwidGFza1NwYW4iLCJ0ZXh0Q29udGVudCIsImRlc2NyaXB0aW9uU3BhbiIsInJpZ2h0U2lkZURpdiIsImR1ZURhdGVTcGFuIiwiZWRpdEJ0bkltZyIsInNyYyIsImFsdCIsImRlbGV0ZUJ0bkltZyIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwicmVtaW5kZXJDb250YWluZXIiLCJkaXNwbGF5UHJvamVjdCIsInByb2plY3ROYW1lIiwicHJvamVjdElkIiwicHJvamVjdExpc3RDb250YWluZXIiLCJsaXN0SXRlbSIsImxpc3RJbWciLCJwcm9qZWN0VGl0bGVIb2xkZXIiLCJkaXNwbGF5UHJvamVjdFRpdGxlIiwicHJvamVjdEluZGV4IiwicHJvamVjdHNDb250YWluZXIiLCJjbGVhclByb2plY3RMaXN0IiwiaW5uZXJIVE1MIiwiY2xlYXJSZW1pbmRlckxpc3QiLCJyZW5kZXJQcm9qZWN0TGlzdCIsImkiLCJsZW5ndGgiLCJyZW5kZXJSZW1pbmRlcnNMaXN0IiwicHJvamVjdCIsInRhc2siLCJjcmVhdGVSZW1pbmRlciIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJ0b2dnbGVDb21wbGV0ZWQiLCJ0aGlzIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJub3ciLCJjcmVhdGVQcm9qZWN0IiwibmFtZSIsImFkZFRhc2siLCJwdXNoIiwic3RvcmVQcm9qZWN0cyIsInByb2plY3RMaXN0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRQcm9qZWN0c0Zyb21TdG9yZSIsInJldHJpZXZlZFByb2plY3RzIiwicGFyc2UiLCJnZXRJdGVtIiwiYWRkUmVtaW5kZXJCdG4iLCJpbnB1dEZvcm0iLCJ1cGRhdGVGb3JtIiwiY2xvc2VSZW1pbmRlckJ0biIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjcmVhdGVSZW1pbmRlckJ0biIsImNyZWF0ZVByb2plY3RCdG4iLCJjdXJyZW50UHJvamVjdEluZGV4IiwiYWRkTGlzdGVuZXJzIiwiZGVsZXRlUmVtaW5kZXJCdG4iLCJlZGl0UmVtaW5kZXJCdG4iLCJwcm9qZWN0QnRuIiwiZm9yRWFjaCIsImluZGV4IiwiYWRkRXZlbnRMaXN0ZW5lciIsImVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwidGFza0luZGV4IiwiZ2V0QXR0cmlidXRlIiwic3BsaWNlIiwidG9nZ2xlIiwicmVtaW5kZXIiLCJjYWxsIiwidXBkYXRlRGlzcGxheWVkUHJvamVjdCIsInVwZGF0ZURpc3BsYXllZFJlbWluZGVycyIsImUiLCJwYXJlbnRFbGVtZW50IiwiY2xvc2VNb2RhbCJdLCJzb3VyY2VSb290IjoiIn0=